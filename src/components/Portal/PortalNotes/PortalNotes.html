
<section class="portal-notes section-pad h-auto">

  <div class="container">
    <div class="row">
      <div class="col-sm-8">
        <h3>{{currentUserFirstName}}'s Notes</h3>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-4" v-for="note in notesResult.content">
        <div class="card card-shadow" >
          <div class="card-body">
            <h5 class="card-title">
              <router-link :to="{ name: 'PortalNoteView', params: { id: note.id }}">
                <strong>{{ note.noteTitle }}</strong>
              </router-link>
            </h5>
            <p class="card-text">{{ note.noteBody.substring(0, 350).concat('...') | striphtml }}</p>
            <p class="card-text"><small class="text-muted">{{note.noteCreatedTime | moment("MMMM Do YYYY, h:mm:ss a") }}</small></p>
          </div>
          <div class="card-footer">
            <button class="btn btn-danger btn-shadow btn-rounded float-sm-left" v-on:click="toggleDeleteConfirm(note)">
              <i class="zmdi zmdi-delete"></i>
            </button>

            <router-link :to="{ name: 'PortalNoteView', params: { id: note.id }}" class="btn btn-info btn-shadow btn-rounded float-sm-right">
              <i class="zmdi zmdi-eye"></i>
            </router-link>
            <span class="float-sm-right">&nbsp;</span>
            <router-link :to="{ name: 'PortalNoteDetail', params: { id: note.id }}" class="btn btn-success btn-shadow btn-rounded float-sm-right">
              <i class="zmdi zmdi-edit"></i>
            </router-link>
          </div>
        </div>

      </div>
    </div>
  </div>
  <b-modal id="modal-center" ref="deleteNote"
           @ok="deleteNote"
           :ok-title="'Delete'"
           :ok-variant="'danger'"
           @cancel="toggleDeleteConfirm()"
           :cancel-title="'Cancel'"
           centered title="Confirm Note Delete?">
    <p class="my-4">Are you sure you want to delete this note?</p>
  </b-modal>
  <b-modal id="modal-center" ref="noteSearch" centered @shown="$refs.noteSearchTerm.focus()">
    <input type="text"
           v-on:keyup.enter="searchNotes"
           v-model="noteSearch.term"
           class="form-control form-control-lg note-title-input"
           ref="noteSearchTerm"
           placeholder="Search Notes For ...">
    <div slot="modal-footer" class="text-center w-100">
      <b-btn @click="searchNotes" class="btn btn-primary btn-shadow btn-rounded">Search</b-btn>
    </div>

  </b-modal>
  <div class="invisible" id="shortcuts">
    <b-btn @click="showSearch"
           v-shortkey="['shift', 'space']" @shortkey="showSearch()"
           class="btn btn-primary btn-shadow btn-rounded">Search</b-btn>
  </div>
</section>

